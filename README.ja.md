# Glimpse - 高速写真チェッカー

[English](./README.md)

舞台写真の選別作業に特化した、高速・軽量なデスクトップアプリケーション。
数千〜数万枚の大容量画像（NEF/JPEG）をストレスなく閲覧・選別できます。

## 特徴

- **爆速** - 数千〜数万枚の画像をストレスなく閲覧
- **多数のRAW対応** - Nikon NEF、Sony ARW、Canon CR2/CR3、Fujifilm RAFなど
- **キーボード操作** - 矢印キーとラベルキーで高速選別
- **中断・再開** - 作業途中でも安心して中断可能
- **軽量** - Tauri + Rustで低メモリ消費
- **自動更新通知** - 新しいバージョンが利用可能になると通知

## 機能一覧

### 基本機能
- フォルダ選択・画像一覧取得
- サムネイル生成（バックグラウンド・マルチスレッド）
- サムネイルキャッシュ
- 仮想スクロールによる一覧表示
- キーボードナビゲーション（矢印キー）
- 不採用ラベル付与（1キー）
- 詳細表示モード（Enter/Space）
- セッション保存・復元（中断・再開）
- 採用ファイルを別フォルダにコピー（エクスポート）

### 高度な機能
- サムネイルサイズ調整（スライダー）
- フィルタリング表示（不採用のみ/採用のみ）
- 複数選択（Ctrl/Cmd+クリック、Shift+クリック）
- ドラッグ&ドロップでフォルダ読み込み
- ダークモード/ライトモード切り替え
- EXIF情報表示
- 画像の回転
- 簡易比較モード（2枚並べて表示）
- エクスポート設定（コピー/移動の選択）

## キーボードショートカット

| キー | 動作 |
|------|------|
| `←` | 前の画像を選択 |
| `→` | 次の画像を選択 |
| `↑` | 上の行の画像を選択 |
| `↓` | 下の行の画像を選択 |
| `1` | 不採用ラベルをトグル |
| `Enter` / `Space` | 詳細表示モードへ |
| `Esc` | 詳細表示から一覧へ戻る |
| `C` | 比較モードへ |
| `Ctrl+O` | フォルダを開く |
| `Ctrl+E` | エクスポート |
| `?` | ヘルプを開く |
| `Home` | 最初の画像へ |
| `End` | 最後の画像へ |
| `PageUp` | 1ページ上へ |
| `PageDown` | 1ページ下へ |

## 対応RAWフォーマット

Glimpseは主要カメラメーカーの様々なRAW画像フォーマットに対応しています：

| フォーマット | メーカー |
|------------|---------|
| NEF | ニコン |
| ARW | ソニー |
| CR2, CR3 | キヤノン |
| RAF | 富士フイルム |
| ORF | オリンパス |
| RW2 | パナソニック |
| PEF | ペンタックス |
| DNG | Adobe（汎用） |
| SRW | サムスン |

標準的な画像フォーマット（JPEG、PNG、TIFF、WebP、BMP、GIF）にも対応しています。

## システム要件

### Windows
- Windows 10/11 64bit
- WebView2 Runtime（Windows 11は標準搭載）

### macOS
- macOS 10.15 (Catalina) 以降

## インストール

### ダウンロード

[Releases](https://github.com/daigotanaka0714/glimpse/releases)から最新版をダウンロードしてください。

- **macOS**: `Glimpse_x.x.x_aarch64.dmg`（Apple Silicon）または `Glimpse_x.x.x_x64.dmg`（Intel）
- **Windows**: `Glimpse_x.x.x_x64-setup.exe`

#### macOS の注意事項

アプリはコード署名されていないため、macOS Gatekeeper によって起動がブロックされる場合があります。以下の手順でアプリを起動できます：

1. DMGファイルを開き、GlimpseをApplicationsフォルダにドラッグ
2. Glimpse.appを右クリック（またはControlキーを押しながらクリック）し、「開く」を選択
3. セキュリティダイアログで「開く」をクリック

または、ターミナルで検疫属性を削除することもできます：
```bash
xattr -cr /Applications/Glimpse.app
```

### ソースからビルド

#### 必要な環境

- [Node.js](https://nodejs.org/) 20.x 以降
- [pnpm](https://pnpm.io/) 9.x 以降
- [Rust](https://www.rust-lang.org/) （最新安定版）

#### 手順

```bash
# リポジトリをクローン
git clone https://github.com/daigotanaka0714/glimpse.git
cd glimpse

# 依存関係をインストール
pnpm install

# 開発モードで実行
pnpm tauri dev

# プロダクションビルド
pnpm tauri build
```

## 使い方

1. アプリを起動
2. 「フォルダを開く」ボタン or `Ctrl+O` で写真フォルダを選択（またはフォルダをドラッグ&ドロップ）
3. サムネイルが表示されたら、矢印キーで移動
4. `1` キーで不採用マーク
5. `Enter` or `Space` で詳細表示
6. 作業完了後、`Ctrl+E` でエクスポート

## 技術スタック

| レイヤー | 技術 | 理由 |
|---------|------|------|
| フレームワーク | Tauri 2.0 | 軽量、Rustバックエンド、クロスプラットフォーム |
| フロントエンド | React 18 + TypeScript | 仮想スクロール、状態管理が容易 |
| スタイリング | Tailwind CSS | 高速な開発、一貫したデザイン |
| 画像処理 | Rust (image, rawloader) | マルチスレッド、NEF対応 |
| データ永続化 | SQLite (rusqlite) | セッション管理、キャッシュ管理 |
| 仮想スクロール | @tanstack/react-virtual | 大量アイテムの効率的レンダリング |

## パフォーマンス目標

| 指標 | 目標値 |
|------|--------|
| 初回起動（5000枚） | < 3秒で一覧表示開始 |
| サムネイル生成速度 | > 100枚/秒 |
| 2回目以降起動 | < 1秒で一覧表示 |
| 詳細表示切替 | < 200ms |
| キー入力応答 | < 50ms |
| メモリ使用量（10000枚時） | < 500MB |

## ライセンス

MIT License

## 貢献

プルリクエストを歓迎します！
